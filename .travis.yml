sudo: false
language: python
install: pip install tox
matrix:
  include:
  - python: '2.7'
    env: TOX_ENV=py27
  - python: '3.7'
    env: TOX_ENV=py37
  - python: '3.7'
    env: TOX_ENV=pycodestyle
  - python: 3.7.9
    env: TOX_ENV=pidiff
  - python: '3.7'
    env: TOX_ENV=cov-travis DEPLOY=1
  - python: '3.7'
    env: TOX_ENV=docs
script: tox -e $TOX_ENV
after_success:
- test $TOX_ENV = docs && scripts/push-docs
deploy:
  provider: pypi
  user: __token__
  password:
    secure: JcDTfIQLhgDlBR/j8kTSF8+pX27fnqT8BlFYQCbTrc7e9MMp1wtZljtJ8qz+9aKfCK+Xb8AmIdYbuGidFlWFtdHx3Y96/SnWoXsw5Dw+ZRtrf6beZh2oGfzDMLZ4reLvsgyaeofe2H1Ln2ooo5AOYMCKFBQ5nQeOObojel1HMNAk1B5kTTm8d9rSlwFtX0t6I2cZmGjSn2tC1Zy0io+/dr6+xDqmxurX17QJGZ8tkqlCsuGR1RM0NncUOPf/Qtfn58O8VclLYqEWHZ+TIBfWRCWZyMGRrpuSUbNWrQg90eeRrU3zs+rWFgdQoz17Bb301XWAMq3nccco63vc1psm5T2sGoz8y/859+RaZO59tHFEMsmoDfIgxMO4ffwR1yd8AmSqCT0Lf+Fdaf2G7vdOyQ3JkFKJa5VS+3vqs+NX0hicSZWRNos/4r+SH93NWu14HyIvez2GzWsB7wmjhCYLZKK+wGFZ4+Bd6Nd99P7j5SpKrx33E3AnoXx1PEr4txOMTO8UHcfQ94qyYuXUOqSJJkZqKDWK68v4wa+2x/bi1bLZHS49FWjK90LMA8kXBesMo0FN8dJ3/WP828BFbw4B/U6uTEOhXTdabMpJSqZXTp0MLcOGZubvdroWknpnmR7Axb9anIHYwQ3pKh+FNjuIJ8CibvjXYkKSHsho/iNvPi4=
  on:
    tags: true
    condition: "$DEPLOY = 1"
  skip_existing: true
